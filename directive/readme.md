<!--
 * @Description:
 * @Autor: shen
 * @Date: 2020-08-02 10:34:26
 * @LastEditTime: 2020-08-02 10:36:20
-->

## 指令是作为标签属性写在模板中的 HTML 标签上的，那么又回到那句老话了，既然是写在模板中的，那它必然会经过模板编译，编译之后会产生虚拟 DOM，在虚拟 DOM 渲染更新时，除了更新节点的内容之外，节点上的一些指令、事件等内容也需要更新。另外，我们还知道，虚拟 DOM 节点的更新不只是更新一个已有的节点，也有可能是创建一个新的节点，还有可能是删除一个节点等等，这些都叫做虚拟 DOM 节点的更新，那么既然虚拟 DOM 节点更新的概念这么大，那到底该什么时候处理指令的相关逻辑，执行指令函数，让指令生效呢？

## 其实，在虚拟 DOM 渲染更新的时候，它在执行相关操作的同时，还会在每个阶段触发相应的钩子函数，我们只需监听不同的钩子函数，就可以在虚拟 DOM 渲染更新的不同阶段做一些额外的事情。

## 所以我们只需在恰当的阶段监听对应的钩子函数来处理指令的相关逻辑，从而就可以使指令生效了。

## 现在我们来设想一下，在什么阶段处理指令的逻辑会比较合适？仔细想一下，当一个节点被创建成 DOM 元素时，如果这个节点上有指令，那此时得处理指令逻辑，让指令生效；当一个节点被更新时，如果节点更新之前没有指令，而更新之后有了指令，或者是更新前后节点上的指令发生了变化，那此时得处理指令逻辑，让指令生效；另外，当节点被移除时，那节点上的指令自然也就没有用了，此时还得处理指令逻辑。

## 基于以上设想，我们得出一个结论：在虚拟 DOM 渲染更新的 create、update、destory 阶段都得处理指令逻辑，所以我们需要监听这三个钩子函数来处理指令逻辑。
